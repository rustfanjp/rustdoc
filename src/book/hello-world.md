% Hello, world!

これまでで、Rustのインストールが完了しました。
早速、初めてのプログラムを書いてみましょう。
どの様なプログラミング言語でも、最初のプログラムでは画面に"Hello, world!"と表示するのが伝統的な流儀です。
コンパイラのインストールを確認するだけでなく、正しく動作する事を確認するために、この様な簡単なプログラムから始めましょう。
また、画面に何かを表示するというのは良くある仕事です。

まず最初に、コードを記述するファイルを作成するします。
`project`ディレクトリの様な物を作成し、プロジェクトに関連するファイルは全てそのディレクトリに入れておくのが好ましい方法ですが、Rust自身は、どこにでもソースファイルを置けます。

ここで、1つ忠告して置きます。
このガイドは、コマンドラインの基本的な操作に慣れている事を要求します。
Rust自身は、どの様な編集ツールを使おうが構いません。
もし、IDEを好むなら、[SolidOak](solidoak)を使っても良いですし、好みのIDEにプラグインを導入するのも良いでしょう。
それぞれのコミュニティ毎に、様々な拡張機能があるでしょう。
また、Rustチームは様々なエディタ向けの[プラグイン](plugins)も提供しています。
エディタやIDEの設定は、このチュートリアルの範囲外です。

[solidoak]: https://github.com/oakes/SolidOak
[plugins]: https://github.com/rust-lang/rust/blob/master/src/etc/CONFIGS.md

それではプロジェクトディレクトリを作ってみましょう。

```bash
$ mkdir ~/projects
$ cd ~/projects
$ mkdir hello_world
$ cd hello_world
```

もし、WindowsでPowerShellを使っていないのならば、`~`は正しく動作しないでしょう。
それぞれのシェルの仕様に従ってください。

それでは、新しいソースファイルを作ります。
まずは`main.rs`と名付けましょう。
Rustのソースファイル名はいつも`.rs`拡張子で終わります。
ファイル名が複数の単語を含む場合は`hello_world.rs`の様に`_`で連結するのが良いでしょう。

ファイルを開き、この様にタイプして下さい。

```rust
fn main() {
    println!("Hello, world!");
}
```

ファイルを保存し、この様にターミナルにタイプして下さい。

```bash
$ rustc main.rs
$ ./main # or main.exe on Windows
Hello, world!
```

成功です！
それでは何が起きたのか詳しく見てみましょう。

```rust
fn main() {

}
```

これらの行は、Rustの*関数(function)}*を定義しています。
`main`関数は特別です。
全てのRustプログラムは`main`関数から始まります。
最初の行は、「`main`という名前で、引数も返値も無い関数を宣言する」という意味です。
もし引数があるならば、括弧(`(`と`))`の間に記述します。
この関数からリターンする事は無いので、返値は省略できます。

Rustでは関数の本体(body)は波括弧(`{`と`}`)の中に記述されます。
また、関数宣言の後にスペースを一つ置いてから、同じ行に最初の波括弧を置くのが良い記述法だと考えられています。

次はこの行です。

```rust
    println!("Hello, world!");
```

この行が、この小さなプログラムの全てです。
ここにはいくつも重要な事があります。
まず、タブでは無く4つの空白によってインデントされています。
インデントにはタブ文字では無く、空白を使用する方が好ましい作法です。
タブキーの打鍵によって、空白が挿入される様に、エディタの設定を行う事をお勧めします。
様々なエディタでの[設定方法](configs)も提供しています。

[configs]: https://github.com/rust-lang/rust/tree/master/src/etc/CONFIGS.md

次は`println!()`の部分です。
これはRustの[マクロ(macro)][macro]であり、Rustにおけるメタプログラミングの手段です。
もしれこれが、関数であったのなら、`println()`の様に書かれるはずです。
今の所は、マクロと関数の違いについては詳しく知る必要はありません。
ここでは`!`を見たら、それは関数では無く、マクロの呼び出しである事を覚えておいてください。
ここで、1つ注意して欲しいのは、RustのマクロはC言語のマクロとは全く異なります。
ですので、マクロを使う事を恐れないで下さい。

[macro]: macros.html

次に、`"Hello, world!"`は、'文字列(string)'です。
システムプログラミング言語において、文字列は非常にやっかいです。
ここでの文字列は、'静的アロケート'された文字列です。
アロケーションについての詳細は[スタックとヒープ](allocation)のページに有ります。
差し当たりは、興味がなければ読む必要は有りません。
この文字列を`println!`の引数として渡し、このマクロが文字列を画面に表示します。
簡単ですね！

[allocation]: the-stack-and-the-heap.html

行はセミコロン(`;`)で終わります。
Rustは、[式(expression)指向言語][expression-oriented language]であり、ほとんどの構文要素は式で、文(statement)ではありません。
`;`は、式が終わった事を示します。
Rustのほとんどの行は`;`で終わります。

[expression-oriented language]: glossary,html#expression-oriented-language

最後に、実際にプログラムをコンパイルし、実行します。
`rustc`にソースファイルの名前を渡す事で、コンパイルできます。

```bash
$ rustc main.rs
```

CやC++の知識があれば、これは`gcc`や`clang`に似ています。
Rustは実行可能なバイナリを出力します。

```bash
$ ls
main main.rs
```

Windowsでは

```bash
$ dir
main.exe main.rs
```

ここには2つのファイルがあり、1つは`.rs`拡張子を持つソースファイルで、もう1つは、実行ファイルです。

```bash
$ ./main # or main.exe on Windows
```

このプログラムはターミナルに`Hello, world!`と表示します。

もし、あなたがRuby、Python、Javascriptの様な動的プログラミング言語から来たのなら、コンパイルと実行が2ステップに分かれているのに慣れていないかもしれません。
Rustは'事前コンパイル言語'であり、プログラムをコンパイルする事ができます。
プログラムのユーザーは、Rustをインストールする必要は有りません。
Ruby、Python、Javascriptの様な動的プログラミング言語では、配布されたソースファイルを実行するには、ソースファイルを実行する実装を持っている必要がありますが、コンパイルと実行を同時に行えます。
プログラミング言語のデザインにおいて、全てにはトレードオフがあり、RustにはRustの選択があるのです。

おめでとう！
あなたは、公式に、Rustプログラムを書きました。
つまり、あなたはすでにRustプログラマーです！
ようこそ、Rustの世界へ！

次に、もう一つのツール、Cargoを導入します。
Cargoは、実際のRustプログラミングの現場で使われています。
`rustc`だけで簡単なプログラムは書けますが、プロジェクトが成長するにつれ、プロジェクト管理やプロジェクトを共有するための手段が欲しくなってきます。
