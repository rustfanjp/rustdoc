% Parsing limitations

### Parsing limitations

マクロシステムのパーサーは十分協力だが、Rust文法のパースは次の2つの制約を持つ。

1. マクロ(macro)の定義は、式(expression)やその他の文法要素をパースした後は、適切なセパレータ(separator)を含む必要がある。
   つまり、`$i:expr [ , ]`の様な定義は不正である。
   なぜなら、`[`は式のセパレータではない。
   一方で、`$i:expr,`や`$i:expr;`は合法である。
   なぜなら、`,`や`;`は式の合法はセパレータである。
   詳細は[RFC 550]を参照。
2. パーサーは、`$` _name_ `:` _designator_ を見つけた時に、曖昧さを残してはならない。
   これは、繰り返し構文の始まりや直後にちょっとした影響を与える。
   こういった場合は、目印となるトークンを配置する事で解決できる。

(訳注) 2つ目の制約は、`$` _name_を繰り返しで挟んだりすると、どの非終端文字にマッチするのか分からなくなるのを防ぐためにあるのだと思われる。

[RFC 550]: https://github.com/rust-lang/rfcs/blob/master/text/0550-macro-future-proofing.md

